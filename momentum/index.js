(()=>{"use strict";const e=()=>{const e=document.querySelector("time"),t=document.querySelector("date"),n=document.querySelector(".greeting"),o=document.querySelector(".name"),r=document.querySelector("body");let c=function(e=20){return Math.floor(Math.random()*e)+1}();const a=document.querySelector(".slide-next"),i=document.querySelector(".slide-prev");const u={morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},s={morning:"Доброе утро",afternoon:"Добрый день",evening:"Добрый вечер",night:"Доброй ночи"};function l(){const e=(new Date).getHours();return e>=6&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0&&e<6?"night":void 0}function d(){let e=l(),t=c;t<10&&(t="0"+c);const n=new Image;n.src=`https://raw.githubusercontent.com/dumbus/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{r.style.backgroundImage=`url("${n.src}")`}}a.addEventListener("click",(function(){c+=1,21==c&&(c=1),d()})),i.addEventListener("click",(function(){c-=1,0==c&&(c=20),d()})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",o.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(o.value=localStorage.getItem("name"))})),d(),function o(r="en"){const c=(new Date).toLocaleTimeString();e.textContent=c,function(e="en"){const n=new Date,o={weekday:"long",month:"long",day:"numeric",timeZone:"UTC"};let r;"en"==e?r=n.toLocaleDateString("en-EN",o):"ru"==e&&(r=n.toLocaleDateString("ru-RU",o));t.textContent=r}(r),function(e="en"){let t=l();"en"==e?n.textContent=`Good ${u[t]}`:"ru"==e&&(n.textContent=s[t])}(r),setTimeout(o,1e3)}();l()},t=()=>{const e=document.querySelector(".weather-icon"),t=document.querySelector(".temperature"),n=document.querySelector(".weather-description"),o=document.querySelector(".wind"),r=document.querySelector(".humidity"),c=document.querySelector(".city"),a=document.querySelector(".weather-error"),i=document.querySelector(".quote"),u=document.querySelector(".author"),s=document.querySelector(".change-quote");function l(e=0,t=19){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}async function d(i,u="en"){try{const c=`https://api.openweathermap.org/data/2.5/weather?q=${i}&lang=${u}&appid=4210f79be2d65c6e8c2376a9120f9018&units=metric`,s=await fetch(c),l=await s.json();e.className="weather-icon owf",e.classList.add(`owf-${l.weather[0].id}`),t.textContent=`${Math.floor(l.main.temp)}°C`,n.textContent=l.weather[0].description,"en"==u?(o.textContent=`Wind speed: ${Math.ceil(l.wind.speed)} m/s`,r.textContent=`Humidity: ${l.main.humidity}% `):"ru"==u&&(o.textContent=`Скорость ветра: ${Math.ceil(l.wind.speed)} м/с`,r.textContent=`Влажность: ${l.main.humidity}% `),a.textContent=""}catch(e){""===i?"en"==u?(c.setAttribute("placeholder","[Enter sity]"),a.textContent="Error! Nothing to geocode for ' '!"):"ru"==u&&(c.setAttribute("placeholder","[Введите город]"),a.textContent="Ошибка! Ничего не найдено как ' '!"):a.textContent="en"==u?`Error! city not found for ${i}!`:`Ошибка! Не найден город ${i}!`,t.textContent="",n.textContent="",o.textContent="",r.textContent=""}}null==localStorage.getItem("city")&&localStorage.setItem("city",c.value),c.value=localStorage.getItem("city"),c.addEventListener("change",(()=>{localStorage.setItem("city",c.value),d(c.value)})),d(c.value);let m=l();async function y(e="en"){const t=await fetch("./assets/data.json"),n=await t.json();"en"==e?(i.textContent=n[m].enQuote,u.textContent=n[m].enAuthor):"ru"==e&&(i.textContent=n[m].ruQuote,u.textContent=n[m].ruAuthor)}y(),s.addEventListener("click",(()=>{m=l(),y()}))},n=()=>{const e=document.querySelector("audio"),t=document.querySelector(".play"),n=document.querySelector(".play-list"),o=document.querySelector(".play-prev"),r=document.querySelector(".play-next");let c;const a=document.querySelector(".player-name"),i=document.querySelector(".current-timing"),u=document.querySelector(".duration-timing"),s=document.querySelector(".muteButton"),l=document.querySelector(".volume-progress"),d=document.querySelector(".player-progress");let m=!1,y=!0,g=.5,v=0;const h=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:15"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"00:15"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"00:15"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"00:15"}];function p(){c=n.childNodes,c[v].classList.add("item-active"),t.classList.toggle("pause"),m?(e.pause(),m=!1):(a.textContent=h[v].title,u.textContent=h[v].duration,e.play(),m=!0)}function f(){e.volume=g,s.style.opacity=1}function S(){e.volume=0,s.style.opacity=.2}function C(){t.classList.remove("pause"),c=n.childNodes,c[v].classList.remove("item-active"),v+=1,4==v&&(v=0),c[v].classList.add("item-active"),m=!1,e.src=h[v].src,e.currentTime=0,p()}e.addEventListener("timeupdate",(function(){var t=Math.floor(e.currentTime/e.duration*100)||0,n=e.currentTime/e.duration||0;let o=Math.floor(t/6.66);o<10&&(o="0"+o),i.textContent=`00:${o}`,d.value=n,100===t&&C()})),s.addEventListener("click",(()=>{y?(f(),y=!1,l.value=g):(S(),y=!0,l.value=0)})),t.addEventListener("click",p),h.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,n.append(t)})),r.addEventListener("click",C),o.addEventListener("click",(function(){t.classList.remove("pause"),c=n.childNodes,c[v].classList.remove("item-active"),v-=1,-1==v&&(v=3),c[v].classList.add("item-active"),m=!1,e.src=h[v].src,e.currentTime=0,p()})),e.src=h[v].src,a.textContent=h[v].title,i.textContent="00:00",u.textContent=h[v].duration,l.addEventListener("input",(function(){g=l.value,e.volume=g,0==e.volume?S():f()})),d.addEventListener("input",(function(){e.currentTime=Math.floor(100*d.value/6.66)}))};window.addEventListener("DOMContentLoaded",(()=>{e(),t(),n()}))})();