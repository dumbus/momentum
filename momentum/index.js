(()=>{"use strict";const e=()=>{const e=document.querySelector("time"),t=document.querySelector("date"),n=document.querySelector(".greeting"),o=document.querySelector(".name"),c=document.querySelector("body");let a=function(e=20){return Math.floor(Math.random()*e)+1}();const r=document.querySelector(".slide-next"),i=document.querySelector(".slide-prev");function s(){const e=(new Date).getHours();return e>=6&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0&&e<6?"night":void 0}function u(){let e=s(),t=a;t<10&&(t="0"+a);const n=new Image;n.src=`https://raw.githubusercontent.com/dumbus/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{c.style.backgroundImage=`url("${n.src}")`}}r.addEventListener("click",(function(){a+=1,21==a&&(a=1),u()})),i.addEventListener("click",(function(){a-=1,0==a&&(a=20),u()})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",o.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(o.value=localStorage.getItem("name"))})),u(),function o(){const c=(new Date).toLocaleTimeString();e.textContent=c,function(){const e=new Date,n={weekday:"long",month:"long",day:"numeric",timeZone:"UTC"},o=e.toLocaleDateString("en-EN",n);t.textContent=o}(),function(){let e=s();n.textContent=`Good ${e}`}(),setTimeout(o,1e3)}()},t=()=>{const e=document.querySelector(".weather-icon"),t=document.querySelector(".temperature"),n=document.querySelector(".weather-description"),o=document.querySelector(".wind"),c=document.querySelector(".humidity"),a=document.querySelector(".city"),r=document.querySelector(".weather-error"),i=document.querySelector(".quote"),s=document.querySelector(".author"),u=document.querySelector(".change-quote");function d(e=0,t=19){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}async function l(i){try{const a=`https://api.openweathermap.org/data/2.5/weather?q=${i}&lang=en&appid=4210f79be2d65c6e8c2376a9120f9018&units=metric`,s=await fetch(a),u=await s.json();e.className="weather-icon owf",e.classList.add(`owf-${u.weather[0].id}`),t.textContent=`${Math.floor(u.main.temp)}Â°C`,n.textContent=u.weather[0].description,o.textContent=`Wind speed: ${Math.ceil(u.wind.speed)} m/s`,c.textContent=`Humidity: ${u.main.humidity}% `,r.textContent=""}catch(e){""===i?(a.setAttribute("placeholder","[Enter sity]"),r.textContent="Error! Nothing to geocode for ' '!"):r.textContent=`Error! city not found for ${i}!`,t.textContent="",n.textContent="",o.textContent="",c.textContent=""}}null==localStorage.getItem("city")&&localStorage.setItem("city",a.value),a.value=localStorage.getItem("city"),a.addEventListener("change",(()=>{localStorage.setItem("city",a.value),l(a.value)})),l(a.value);let m=d();async function y(){const e=await fetch("./assets/data.json"),t=await e.json();i.textContent=t[m].quote,s.textContent=t[m].author}y(),u.addEventListener("click",(()=>{m=d(),y()}))},n=()=>{const e=document.querySelector("audio"),t=document.querySelector(".play"),n=document.querySelector(".play-list"),o=document.querySelector(".play-prev"),c=document.querySelector(".play-next");let a,r=!1,i=0;const s=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:15"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"00:15"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"00:15"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"00:15"}];function u(){a=n.childNodes,a[i].classList.add("item-active"),t.classList.toggle("pause"),r?(e.pause(),r=!1):(e.currentTime=0,e.src=s[i].src,e.play(),r=!0)}function d(){t.classList.remove("pause"),a=n.childNodes,a[i].classList.remove("item-active"),i+=1,4==i&&(i=0),a[i].classList.add("item-active"),r=!1,u()}t.addEventListener("click",u),s.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,n.append(t)})),c.addEventListener("click",d),o.addEventListener("click",(function(){t.classList.remove("pause"),a=n.childNodes,a[i].classList.remove("item-active"),i-=1,-1==i&&(i=3),a[i].classList.add("item-active"),r=!1,u()})),e.addEventListener("timeupdate",(()=>{e.currentTime>=15&&(console.log("switched"),d())}))};window.addEventListener("DOMContentLoaded",(()=>{e(),t(),n()}))})();